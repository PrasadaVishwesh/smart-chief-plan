// Comprehensive dish-specific image mapping for accurate recipe visuals
// Each image URL is carefully selected to match the actual dish appearance

export const dishSpecificImages: Record<string, string> = {
  // ITALIAN
  "Spaghetti Carbonara": "https://images.pexels.com/photos/4518843/pexels-photo-4518843.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Margherita Pizza": "https://images.pexels.com/photos/825661/pexels-photo-825661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mushroom Risotto": "https://images.pexels.com/photos/6287525/pexels-photo-6287525.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Lasagna Bolognese": "https://images.pexels.com/photos/5949884/pexels-photo-5949884.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - BIRYANI VARIETIES (22+ unique)
  "Chicken Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Hyderabadi Dum Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Lucknowi Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kolkata Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Malabar Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Thalassery Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ambur Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dindigul Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Memoni Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sindhi Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bohri Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Coorgi Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kashmiri Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Beary Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Calicut Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Arcot Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bombay Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Awadhi Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mughlai Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kalyani Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Awadhi Lucknowi Biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Vegetable Biryani": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - MAIN CURRIES
  "Butter Chicken": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Palak Paneer": "https://images.pexels.com/photos/9797029/pexels-photo-9797029.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chicken Tikka Masala": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rogan Josh": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dal Makhani": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Malai Kofta": "https://images.pexels.com/photos/7625265/pexels-photo-7625265.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mutton Korma": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Keema Matar": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chettinad Chicken": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Laal Maas": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kosha Mangsho": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gatte Ki Sabzi": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Aloo Gobi": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kadhi Pakora": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Punjabi Kadhi Pakora": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Hara Dhania Murgh": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dal Tadka": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gujarati Dal": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - DOSA VARIETIES (50+)
  "Masala Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Plain Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rava Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Onion Rava Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Neer Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Set Dosa": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pesarattu": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Pesarattu Upma": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Adai": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Appam": "https://images.unsplash.com/photo-1610192244261-3f33de3f55e4?w=800",
  "Egg Appam": "https://images.unsplash.com/photo-1610192244261-3f33de3f55e4?w=800",
  "Palappam": "https://images.unsplash.com/photo-1610192244261-3f33de3f55e4?w=800",
  "Paniyaram": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sweet Paniyaram": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Uttapam": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Onion Uttapam": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tomato Uttapam": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mixed Vegetable Uttapam": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Cheese Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Paper Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Paper Masala Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ghee Roast Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ghee Roast Masala Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Podi Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Butter Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Butter Masala Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Schezwan Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Spring Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Paneer Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mysore Masala Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ragi Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Oats Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Moong Dal Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Sabudana Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Vegetable Adai": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Chettinad Dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Beetroot Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",
  "Carrot Dosa": "https://images.unsplash.com/photo-1668236543090-82eba5ee5976?w=800",

  // INDIAN - STREET FOOD
  "Pav Bhaji": "https://images.unsplash.com/photo-1606491956689-2ea866880c84?w=800",
  "Vada Pav": "https://images.pexels.com/photos/15016285/pexels-photo-15016285.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Misal Pav": "https://images.pexels.com/photos/15016285/pexels-photo-15016285.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chole Bhature": "https://images.pexels.com/photos/15016285/pexels-photo-15016285.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chole Bhature Delhi Style": "https://images.pexels.com/photos/15016285/pexels-photo-15016285.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Samosa": "https://images.pexels.com/photos/4449068/pexels-photo-4449068.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Aloo Tikki": "https://images.pexels.com/photos/14477876/pexels-photo-14477876.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dahi Bhalla": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bhel Puri": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sev Puri": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ragda Pattice": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kathi Roll": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pani Puri": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - SOUTH INDIAN
  "Idli Sambar": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Idli": "https://images.pexels.com/photos/4331491/pexels-photo-4331491.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Medu Vada": "https://images.pexels.com/photos/14477876/pexels-photo-14477876.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rava Idli": "https://images.pexels.com/photos/14477876/pexels-photo-14477876.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sambar": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rasam": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pongal": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Coconut Chutney": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Upma": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Appam with Stew": "https://images.unsplash.com/photo-1630383249896-424e482df921?w=800",
  "Kerala Fish Curry": "https://images.unsplash.com/photo-1585937421612-70a008356fbe?w=800",
  "Fish Curry Pondicherry Style": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mangalorean Fish Curry": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kerala Banana Chips": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Erissery": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - BENGALI
  "Shorshe Ilish": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Macher Jhol": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chingri Malai Curry": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Luchi-Aloor Dom": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - SWEETS (50+)
  "Gulab Jamun": "https://images.pexels.com/photos/12737671/pexels-photo-12737671.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rasgulla": "https://images.pexels.com/photos/14477877/pexels-photo-14477877.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rosogolla": "https://images.pexels.com/photos/14477877/pexels-photo-14477877.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sandesh": "https://images.pexels.com/photos/14477876/pexels-photo-14477876.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Cham Cham": "https://images.unsplash.com/photo-1666190077606-f25c9f0e9b98?w=800",
  "Rasmalai": "https://images.pexels.com/photos/14477878/pexels-photo-14477878.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mishti Doi": "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800",
  "Pantua": "https://images.pexels.com/photos/12737671/pexels-photo-12737671.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Langcha": "https://images.pexels.com/photos/12737671/pexels-photo-12737671.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kaju Katli": "https://images.pexels.com/photos/14477879/pexels-photo-14477879.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Peda": "https://images.pexels.com/photos/9892330/pexels-photo-9892330.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Doodh Peda": "https://images.pexels.com/photos/9892330/pexels-photo-9892330.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Barfi": "https://images.pexels.com/photos/14477879/pexels-photo-14477879.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Besan Barfi": "https://images.pexels.com/photos/9892329/pexels-photo-9892329.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mysore Pak": "https://images.pexels.com/photos/9892329/pexels-photo-9892329.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Jalebi": "https://images.pexels.com/photos/4331490/pexels-photo-4331490.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Imarti": "https://images.pexels.com/photos/12737671/pexels-photo-12737671.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kheer": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Payasam": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Rabdi": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Basundi": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Shrikhand": "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800",
  "Kesar Shrikhand": "https://images.unsplash.com/photo-1488477181946-6428a0291777?w=800",
  "Modak": "https://images.pexels.com/photos/14477880/pexels-photo-14477880.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ukadiche Modak": "https://images.pexels.com/photos/14477880/pexels-photo-14477880.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Puran Poli": "https://images.unsplash.com/photo-1567337710282-00832b415979?w=800",
  "Ghevar": "https://images.unsplash.com/photo-1666190077606-f25c9f0e9b98?w=800",
  "Malpua": "https://images.pexels.com/photos/4331490/pexels-photo-4331490.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Balushahi": "https://images.pexels.com/photos/12737671/pexels-photo-12737671.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Petha": "https://images.pexels.com/photos/14477879/pexels-photo-14477879.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Besan Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Motichoor Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Til Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gond Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rava Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Coconut Ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chena Poda": "https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800",
  "Chhena Poda": "https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=800",
  "Rasabali": "https://images.pexels.com/photos/14477878/pexels-photo-14477878.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Rajbhog": "https://images.pexels.com/photos/14477877/pexels-photo-14477877.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kheer Kadam": "https://images.pexels.com/photos/14477877/pexels-photo-14477877.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kopra Pak": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kesari": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ada Pradhaman": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Palada Payasam": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Pongal Payasam": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "Kalakand": "https://images.unsplash.com/photo-1590080875852-ba44f526c5f4?w=800",
  "Mohanthal": "https://images.pexels.com/photos/9892329/pexels-photo-9892329.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pinni": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Thekua": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pitha": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sel Roti": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mawa Bati": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Churma": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",

  // INDIAN - SNACKS & OTHERS
  "Dhokla": "https://images.pexels.com/photos/14477879/pexels-photo-14477879.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Khandvi": "https://images.pexels.com/photos/9609838/pexels-photo-9609838.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Thepla": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Khakhra": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Makki Di Roti": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Thalipeeth": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Undhiyu": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Handvo": "https://images.pexels.com/photos/4331491/pexels-photo-4331491.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Fafda Jalebi": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Paneer Tikka": "https://images.pexels.com/photos/5410400/pexels-photo-5410400.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tandoori Chicken": "https://images.pexels.com/photos/2611917/pexels-photo-2611917.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Amritsari Kulcha": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Amritsari Fish": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sarson Ka Saag": "https://images.pexels.com/photos/9609838/pexels-photo-9609838.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dal Baati Churma": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Litti Chokha": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bharli Vangi": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sabudana Khichdi": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ker Sangri": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pyaaz Kachori": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Galawati Kebab": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bedmi Puri with Aloo Sabzi": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Poha": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bhutte Ka Kees": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bajra Khichdi": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Jeera Rice": "https://images.pexels.com/photos/723198/pexels-photo-723198.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pulao": "https://images.pexels.com/photos/7426867/pexels-photo-7426867.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kahwa": "https://images.pexels.com/photos/312418/pexels-photo-312418.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Filter Coffee": "https://images.pexels.com/photos/312418/pexels-photo-312418.jpeg?auto=compress&cs=tinysrgb&w=800",

  // THAI
  "Pad Thai": "https://images.pexels.com/photos/699953/pexels-photo-699953.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Green Curry": "https://images.pexels.com/photos/674574/pexels-photo-674574.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tom Yum Soup": "https://images.pexels.com/photos/1907228/pexels-photo-1907228.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Massaman Curry": "https://images.pexels.com/photos/699544/pexels-photo-699544.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Red Curry": "https://images.pexels.com/photos/674574/pexels-photo-674574.jpeg?auto=compress&cs=tinysrgb&w=800",

  // JAPANESE
  "Chicken Ramen": "https://images.pexels.com/photos/884600/pexels-photo-884600.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sushi Roll": "https://images.pexels.com/photos/357756/pexels-photo-357756.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tonkatsu": "https://images.pexels.com/photos/10661972/pexels-photo-10661972.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Miso Soup": "https://images.pexels.com/photos/3926508/pexels-photo-3926508.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tempura": "https://images.pexels.com/photos/3298068/pexels-photo-3298068.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Okonomiyaki": "https://images.pexels.com/photos/5638268/pexels-photo-5638268.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gyudon": "https://images.pexels.com/photos/5638527/pexels-photo-5638527.jpeg?auto=compress&cs=tinysrgb&w=800",

  // CHINESE
  "Kung Pao Chicken": "https://images.pexels.com/photos/2347311/pexels-photo-2347311.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dim Sum - Har Gow": "https://images.pexels.com/photos/6646069/pexels-photo-6646069.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mapo Tofu": "https://images.pexels.com/photos/6646351/pexels-photo-6646351.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Char Siu": "https://images.pexels.com/photos/5409010/pexels-photo-5409010.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Xiao Long Bao": "https://images.pexels.com/photos/6646069/pexels-photo-6646069.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Dan Dan Noodles": "https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg?auto=compress&cs=tinysrgb&w=800",

  // KOREAN
  "Bibimbap": "https://images.pexels.com/photos/5773968/pexels-photo-5773968.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Korean Fried Chicken": "https://images.pexels.com/photos/60616/fried-chicken-chicken-fried-crunchy-60616.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Kimchi Jjigae": "https://images.pexels.com/photos/5773969/pexels-photo-5773969.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Japchae": "https://images.pexels.com/photos/5773970/pexels-photo-5773970.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tteokbokki": "https://images.pexels.com/photos/5773969/pexels-photo-5773969.jpeg?auto=compress&cs=tinysrgb&w=800",

  // MEXICAN
  "Tacos Al Pastor": "https://images.pexels.com/photos/2092507/pexels-photo-2092507.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Enchiladas Rojas": "https://images.pexels.com/photos/5737254/pexels-photo-5737254.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Guacamole": "https://images.pexels.com/photos/5737377/pexels-photo-5737377.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Burrito": "https://images.pexels.com/photos/461198/pexels-photo-461198.jpeg?auto=compress&cs=tinysrgb&w=800",

  // MIDDLE EASTERN
  "Hummus": "https://images.pexels.com/photos/1618898/pexels-photo-1618898.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Falafel": "https://images.pexels.com/photos/6252726/pexels-photo-6252726.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Shawarma": "https://images.pexels.com/photos/5779368/pexels-photo-5779368.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Shakshuka": "https://images.pexels.com/photos/6605306/pexels-photo-6605306.jpeg?auto=compress&cs=tinysrgb&w=800",

  // VIETNAMESE
  "Pho": "https://images.pexels.com/photos/1618888/pexels-photo-1618888.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Banh Mi": "https://images.pexels.com/photos/5779785/pexels-photo-5779785.jpeg?auto=compress&cs=tinysrgb&w=800",

  // FRENCH
  "Coq au Vin": "https://images.pexels.com/photos/6210747/pexels-photo-6210747.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Croissant": "https://images.pexels.com/photos/3892469/pexels-photo-3892469.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Ratatouille": "https://images.pexels.com/photos/2089712/pexels-photo-2089712.jpeg?auto=compress&cs=tinysrgb&w=800",

  // GREEK
  "Moussaka": "https://images.pexels.com/photos/5949900/pexels-photo-5949900.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gyros": "https://images.pexels.com/photos/4676635/pexels-photo-4676635.jpeg?auto=compress&cs=tinysrgb&w=800",

  // SPANISH
  "Paella": "https://images.pexels.com/photos/16743486/pexels-photo-16743486.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Gazpacho": "https://images.pexels.com/photos/1448721/pexels-photo-1448721.jpeg?auto=compress&cs=tinysrgb&w=800",

  // AFRICAN
  "Jollof Rice": "https://images.pexels.com/photos/7353376/pexels-photo-7353376.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Tagine": "https://images.pexels.com/photos/5409020/pexels-photo-5409020.jpeg?auto=compress&cs=tinysrgb&w=800",

  // AMERICAN & BRITISH
  "Mac and Cheese": "https://images.pexels.com/photos/1437267/pexels-photo-1437267.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Fish and Chips": "https://images.pexels.com/photos/1352274/pexels-photo-1352274.jpeg?auto=compress&cs=tinysrgb&w=800",

  // ASIAN
  "Beef Rendang": "https://images.pexels.com/photos/5409021/pexels-photo-5409021.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Nasi Goreng": "https://images.pexels.com/photos/723198/pexels-photo-723198.jpeg?auto=compress&cs=tinysrgb&w=800",

  // PERUVIAN
  "Ceviche": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",

  // BRAZILIAN
  "Feijoada": "https://images.pexels.com/photos/5409009/pexels-photo-5409009.jpeg?auto=compress&cs=tinysrgb&w=800",

  // TURKISH
  "Doner Kebab": "https://images.pexels.com/photos/4676635/pexels-photo-4676635.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Lahmacun": "https://images.pexels.com/photos/6605208/pexels-photo-6605208.jpeg?auto=compress&cs=tinysrgb&w=800",

  // LEBANESE
  "Tabbouleh": "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=800",
};

// Cuisine-based fallback images
export const cuisineFallbackImages: Record<string, string> = {
  "Italian": "https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Indian": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Asian": "https://images.pexels.com/photos/2347311/pexels-photo-2347311.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mexican": "https://images.pexels.com/photos/2092507/pexels-photo-2092507.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Thai": "https://images.pexels.com/photos/699953/pexels-photo-699953.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Japanese": "https://images.pexels.com/photos/357756/pexels-photo-357756.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Chinese": "https://images.pexels.com/photos/955137/pexels-photo-955137.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Korean": "https://images.pexels.com/photos/5773968/pexels-photo-5773968.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Vietnamese": "https://images.pexels.com/photos/1907228/pexels-photo-1907228.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Middle Eastern": "https://images.pexels.com/photos/6544378/pexels-photo-6544378.jpeg?auto=compress&cs=tinysrgb&w=800",
  "French": "https://images.pexels.com/photos/3026808/pexels-photo-3026808.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Spanish": "https://images.pexels.com/photos/4871119/pexels-photo-4871119.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Greek": "https://images.pexels.com/photos/1211887/pexels-photo-1211887.jpeg?auto=compress&cs=tinysrgb&w=800",
  "American": "https://images.pexels.com/photos/1639557/pexels-photo-1639557.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Brazilian": "https://images.pexels.com/photos/7613568/pexels-photo-7613568.jpeg?auto=compress&cs=tinysrgb&w=800",
  "African": "https://images.pexels.com/photos/5638527/pexels-photo-5638527.jpeg?auto=compress&cs=tinysrgb&w=800",
  "British": "https://images.pexels.com/photos/6941028/pexels-photo-6941028.jpeg?auto=compress&cs=tinysrgb&w=800",
  "German": "https://images.pexels.com/photos/4518655/pexels-photo-4518655.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Mediterranean": "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Sri Lankan": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Bangladeshi": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Pakistani": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Turkish": "https://images.pexels.com/photos/4676635/pexels-photo-4676635.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Lebanese": "https://images.pexels.com/photos/1618898/pexels-photo-1618898.jpeg?auto=compress&cs=tinysrgb&w=800",
  "Peruvian": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
};

// Category-based fallback images for dish types
export const categoryFallbackImages: Record<string, string> = {
  "biryani": "https://images.pexels.com/photos/12737656/pexels-photo-12737656.jpeg?auto=compress&cs=tinysrgb&w=800",
  "curry": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "rice": "https://images.pexels.com/photos/723198/pexels-photo-723198.jpeg?auto=compress&cs=tinysrgb&w=800",
  "noodles": "https://images.pexels.com/photos/1279330/pexels-photo-1279330.jpeg?auto=compress&cs=tinysrgb&w=800",
  "soup": "https://images.pexels.com/photos/1907228/pexels-photo-1907228.jpeg?auto=compress&cs=tinysrgb&w=800",
  "salad": "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=800",
  "bread": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "dessert": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "sweet": "https://images.pexels.com/photos/4110542/pexels-photo-4110542.jpeg?auto=compress&cs=tinysrgb&w=800",
  "snack": "https://images.pexels.com/photos/4331489/pexels-photo-4331489.jpeg?auto=compress&cs=tinysrgb&w=800",
  "dosa": "https://images.pexels.com/photos/5560763/pexels-photo-5560763.jpeg?auto=compress&cs=tinysrgb&w=800",
  "idli": "https://images.pexels.com/photos/4331491/pexels-photo-4331491.jpeg?auto=compress&cs=tinysrgb&w=800",
  "kebab": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "fish": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "seafood": "https://images.pexels.com/photos/3763847/pexels-photo-3763847.jpeg?auto=compress&cs=tinysrgb&w=800",
  "chicken": "https://images.pexels.com/photos/7625056/pexels-photo-7625056.jpeg?auto=compress&cs=tinysrgb&w=800",
  "meat": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "pork": "https://images.pexels.com/photos/6210959/pexels-photo-6210959.jpeg?auto=compress&cs=tinysrgb&w=800",
  "vegetarian": "https://images.pexels.com/photos/7353380/pexels-photo-7353380.jpeg?auto=compress&cs=tinysrgb&w=800",
  "dal": "https://images.pexels.com/photos/7625274/pexels-photo-7625274.jpeg?auto=compress&cs=tinysrgb&w=800",
  "paneer": "https://images.pexels.com/photos/9797029/pexels-photo-9797029.jpeg?auto=compress&cs=tinysrgb&w=800",
  "roti": "https://images.pexels.com/photos/1117862/pexels-photo-1117862.jpeg?auto=compress&cs=tinysrgb&w=800",
  "paratha": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "puri": "https://images.pexels.com/photos/2474661/pexels-photo-2474661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "ladoo": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "barfi": "https://images.pexels.com/photos/14477879/pexels-photo-14477879.jpeg?auto=compress&cs=tinysrgb&w=800",
  "kheer": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "payasam": "https://images.unsplash.com/photo-1631452180519-c014fe946bc7?w=800",
  "halwa": "https://images.pexels.com/photos/9892328/pexels-photo-9892328.jpeg?auto=compress&cs=tinysrgb&w=800",
  "pizza": "https://images.pexels.com/photos/825661/pexels-photo-825661.jpeg?auto=compress&cs=tinysrgb&w=800",
  "pasta": "https://images.pexels.com/photos/4518843/pexels-photo-4518843.jpeg?auto=compress&cs=tinysrgb&w=800",
  "sushi": "https://images.pexels.com/photos/357756/pexels-photo-357756.jpeg?auto=compress&cs=tinysrgb&w=800",
  "ramen": "https://images.pexels.com/photos/884600/pexels-photo-884600.jpeg?auto=compress&cs=tinysrgb&w=800",
  "default": "https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=800",
};

// Get category from dish name
const getCategoryFromName = (name: string): string | null => {
  const lowerName = name.toLowerCase();
  const categories = Object.keys(categoryFallbackImages);
  
  for (const category of categories) {
    if (lowerName.includes(category)) {
      return category;
    }
  }
  return null;
};

// Get fallback image based on cuisine and dish name
export const getFallbackImage = (cuisine: string, dishName: string): string => {
  // First try dish-specific image
  if (dishSpecificImages[dishName]) {
    return dishSpecificImages[dishName];
  }
  
  // Then try category-based fallback
  const category = getCategoryFromName(dishName);
  if (category && categoryFallbackImages[category]) {
    return categoryFallbackImages[category];
  }
  
  // Then try cuisine-based fallback
  if (cuisineFallbackImages[cuisine]) {
    return cuisineFallbackImages[cuisine];
  }
  
  // Default fallback
  return categoryFallbackImages.default;
};

// Get the best available image for a recipe
export const getRecipeImage = (recipe: { name: string; cuisine: string; image?: string }): string => {
  // First check dish-specific mapping
  if (dishSpecificImages[recipe.name]) {
    return dishSpecificImages[recipe.name];
  }
  
  // If recipe has its own image, use it
  if (recipe.image && recipe.image.length > 0) {
    return recipe.image;
  }
  
  // Otherwise use fallback
  return getFallbackImage(recipe.cuisine, recipe.name);
};

// Image preloading cache
const preloadedImages = new Set<string>();
const preloadingImages = new Set<string>();

// Preload a single image
export const preloadImage = (src: string): Promise<void> => {
  return new Promise((resolve, reject) => {
    if (preloadedImages.has(src) || preloadingImages.has(src)) {
      resolve();
      return;
    }
    
    preloadingImages.add(src);
    const img = new Image();
    
    img.onload = () => {
      preloadedImages.add(src);
      preloadingImages.delete(src);
      resolve();
    };
    
    img.onerror = () => {
      preloadingImages.delete(src);
      reject(new Error(`Failed to preload: ${src}`));
    };
    
    img.src = src;
  });
};

// Preload multiple images with concurrency limit
export const preloadImages = async (
  urls: string[], 
  concurrency: number = 4
): Promise<void> => {
  const queue = [...urls];
  const executing: Promise<void>[] = [];
  
  while (queue.length > 0 || executing.length > 0) {
    while (queue.length > 0 && executing.length < concurrency) {
      const url = queue.shift()!;
      const promise = preloadImage(url)
        .catch(() => {}) // Silently handle errors
        .then(() => {
          const index = executing.indexOf(promise);
          if (index > -1) executing.splice(index, 1);
        });
      executing.push(promise);
    }
    
    if (executing.length > 0) {
      await Promise.race(executing);
    }
  }
};

// Preload images for visible recipes
export const preloadVisibleRecipeImages = (
  recipes: Array<{ name: string; cuisine: string; image?: string }>,
  count: number = 12
): void => {
  const urls = recipes.slice(0, count).map(recipe => getRecipeImage(recipe));
  
  // Use requestIdleCallback for non-blocking preload
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() => {
      preloadImages(urls, 4);
    });
  } else {
    setTimeout(() => {
      preloadImages(urls, 4);
    }, 100);
  }
};

// Check if an image is preloaded
export const isImagePreloaded = (src: string): boolean => {
  return preloadedImages.has(src);
};
